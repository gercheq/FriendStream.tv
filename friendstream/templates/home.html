{% extends "base.html" %}
{% load verbatim %}

{% block htmltitle %}{{ block.super }}{% endblock %}

{% block body_id %}app{% endblock %}

{% block content %}

    <div id="wrapper">
       <div id="stream-container">
         <div id="logo">
           <a class="ir" href="#" title="friendstream.tv - new generation tv">FriendStream.TV</a>
         </div>
         <div id="navigation">
           <ul class="horizontal clearfix">
             <li><a href="#" class="rc cufon nav-selected" data-target="stream">home</a></li>
             <li><a href="#" class="rc cufon">channels</a></li>
             <li><a href="#" class="rc cufon" data-target="sidebar-account">my account</a></li>
             <li><a href="{% url signout %}" class="rc cufon">sign out</a></li>
         </div>

          <div id="stream" class="sidebar">
              <div id="sidebar-account" class="sidebar-inner">
                {% if accounts.facebook %}
                    <h3><img src="{{ STATIC_URL }}css/images/facebook.png"> {{ accounts.facebook.display_name }} (<a href="#">disconnect</a>)</h3>
                {% else %}
                    <h3><img src="{{ STATIC_URL }}css/images/facebook.png"> <a href="{% url begin backend="facebook" %}">connect</a></h3>
                {% endif %}
                {% if accounts.twitter %}
                    <h3><img src="{{ STATIC_URL }}css/images/twitter.png"> {{ accounts.twitter.display_name }} (<a href="#">disconnect</a>)</h3>
                {% else %}
                    <h3><img src="{{ STATIC_URL }}css/images/twitter.png"> <a href="{% url begin backend="twitter" %}">connect</a></h3>
                {% endif %}
              </div>

              <div id="sidebar-channels" class="sidebar-inner">
                  <h3>Featured Channels</h3>

              </div>

              <div id="aggregated-stream" class="sidebar-inner">
               <div class="loading"><img src="{{ STATIC_URL }}css/images/ajax-loader.gif"/ > Please wait while we are downloading videos shared by your friends...</div>
              </div>
          </div><!-- end of .sidebar -->

         <!--

         SEARCH IS DISABLED FOR NOW !

         <div id="search" class="clearfix">
           <input type="text" name="search" id="search-input" class="search-input" placeholder="Search videos..." />
           <input type="submit" value="Search" />
         </div>
         -->

       </div><!-- end of #stream-container -->

       <div id="video-container">

         <div id="video-embed-shadow" class="drop-shadow lifted"></div>

         <div id="video-embed" class=""></div>

         <div id="video-details" class="clearfix">
           <div class="avatar"></div>
           <div class="metadata">
             <h3></h3>
             <blockquote></blockquote>
             <p><span class="icon">Shared on </span> <span class="friend-name"><a href="#" target="_blank"></a></span></p>
           </div>
         </div>
       </div>

     </div> <!--! end of #wrapper -->



<!--

    <div id="container">
        <div id="youtube-player"></div>

        <div id="videos"></div>
    </div>

    {% verbatim %}
    <script id="video-template" type="text/x-jquery-tmpl">
        <div class="video" data-service="${video.service}" data-ident="${video.ident}">
            <strong>{{if (video.service == 'twitter.com')}} T {{/if}}</strong>
            ${poster.display_name}
        </div>
    </script>
    {% endverbatim %}
-->

    <script type="text/javascript">
    /*
        function onYouTubePlayerReady (playerid) {
            $(document).trigger('playerready', [playerid]);
        }

        $(document).ready(function () {
            // set up youtube
            var params = { allowScriptAccess: 'always' };
            var atts = { id: 'youtube-player' };
            swfobject.embedSWF('http://www.youtube.com/apiplayer?enablejsapi=1&version=3', 'youtube-player',
                '800', '450', '8', null, null, params, atts);
        });

        $('#video-template').template('video');

        $(document).bind('playerready', function () {
            // load the videos
            $.getJSON('{% url videos %}', function (data) {
                var $videos = $('#videos');
                $.each(data, function (i, videodata) {
                    var $newvideo = $.tmpl('video', videodata);
                    $newvideo.bind('click', function () {
                        $('#youtube-player').get(0).loadVideoById(videodata.video.ident);
                    });
                    $videos.append($newvideo);
                });
            });
        });
        */

        $(document).ready(function () {
            $('#navigation a').click(function () {
                $('#navigation a.selected').removeClass('selected');
                $(this).addClass('selected');

                $('#stream-container .sidebar').hide();
                console.log('REVEALING', $(this).attr('data-target'));
                $('#' + $(this).attr('data-target')).show();
            });
        });

    </script>

{% endblock %}
